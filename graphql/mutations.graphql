mutation UpdateGridMutation($id: uuid!, $grid: jsonb!) {
  update_grid(_set: {grid: $grid}, where: {id: {_eq: $id}}) {
    returning {
      id
      grid
    }
  }
}

mutation UpdateApplicationBySampleCodePositive($sample_code: String!, $positive: Boolean!) {
  update_application(
    where: {sample_code: {_eq: $sample_code}}
    _set: {tested_positive: $positive}
  ) {
    affected_rows
  }
}

mutation InsertGridMutation(
  $gridObjects: [grid_insert_input!]!
  $applicationsObjects: [application_insert_input!]!
) {
  insert_grid(objects: $gridObjects) {
    affected_rows
  }
  insert_application(
    objects: $applicationsObjects
    on_conflict: {constraint: application_sample_code_key, update_columns: referenced_in_grid_id}
  ) {
    affected_rows
  }
}

mutation InsertApplicationMutation($application: [application_insert_input!]!) {
  insert_application(objects: $application) {
    affected_rows
  }
}
